/*
* validin
* Elegant form validation
* Copyright (c) 2017-2022 Thom Hines
* Licensed under MIT.
* @author Thom Hines
* https://github.com/thomhines/validin
* @version 0.1.4
*/
function vnValidateInput(e,r){var a=!1,t="",s=$this_form.data("vn_options");if(clearTimeout(validation_debounce_timeout),e.is(":radio")&&(e=jQuery('input[name="'+e.attr("name")+'"]').last()),e.attr("required")&&!e.getValue())a=!0,t=s.required_field_error_message;else if(!e.attr("required")&&""==e.val()&&e.attr("validate")&&e.attr("validate").indexOf("match")<0)a=!1,t="";else if(e.attr("validate")){var i=e.attr("validate").split("|");for(x=0;x<i.length;x++){req_values=i[x].split(":");var n=s.validation_tests[req_values[0]];if(s.custom_tests&&s.custom_tests[req_values[0]]&&(n=s.custom_tests[req_values[0]]),t);else if("required"==req_values[0]);else if("function"==req_values[0])result=window[req_values[1]](e.val()),!0!==result&&(a=!0,t=result);else if("regex"==req_values[0]){var o="";regex_array=req_values,regex_array.splice(0,1),regex=regex_array.join(":"),"/"==regex.substr(0,1)&&(regex=regex.substr(1)),regex.lastIndexOf("/")>=regex.length-3&&(o=regex.substr(regex.lastIndexOf("/")+1),regex=regex.substr(0,regex.lastIndexOf("/"))),regex=new RegExp(regex,o),""!=e.val().replace(regex,"")&&(a=!0,t=n.error_message)}else"min"==req_values[0]&&(parseFloat(e.val())<parseFloat(req_values[1])||parseFloat(e.val())!=e.val())?(a=!0,t=n.error_message.replace("%i",req_values[1])):"max"==req_values[0]&&(parseFloat(e.val())>parseFloat(req_values[1])||parseFloat(e.val())!=e.val())?(a=!0,t=n.error_message.replace("%i",req_values[1])):"min_length"==req_values[0]&&e.val().length<req_values[1]?(a=!0,t=n.error_message.replace("%i",req_values[1])):"max_length"==req_values[0]&&e.val().length>req_values[1]?(a=!0,t=n.error_message.replace("%i",req_values[1])):"match"==req_values[0]&&e.val()!=jQuery(req_values[1]).val()?(a=!0,jQuery(req_values[1]).addClass("match_error"),t=n.error_message.replace("%i",req_values[1])):n.regex&&""!=e.val().replace(n.regex,"")&&(a=!0,t=n.error_message);"match"==req_values[0]&&e.val()==jQuery(req_values[1]).val()&&jQuery(req_values[1]).removeClass("match_error")}}else a=!1,t="";var l=function(){vnAttachMessage(e,t),a?e.attr("aria-invalid","true").addClass(s.invalid_input_class):e.attr("aria-invalid","false").removeClass(s.invalid_input_class)};return r?l():validation_debounce_timeout=setTimeout(function(){l()},s.feedback_delay),vnDisableParentForm(e.closest("form")),s.onValidateInput&&s.onValidateInput({input:e[0],has_error:t.length>0,error_message:t}),!a}function vnIsFormValid(e){return options=$this_form.data("vn_options"),is_valid=!0,$inputs=e.find(":input"),$inputs.each(function(){0==vnValidateInput(jQuery(this),!0)&&(is_valid=!1)}),is_valid}function vnAttachMessage(e,r){options=$this_form.data("vn_options"),e.next().html()!=r?""==r&&e.next().hasClass("validation_error")?e.next(".validation_error").fadeOut(400,function(){e.next(".validation_error").remove()}):""!=r&&(e.next().hasClass("validation_error")||e.after('<div class="'+options.error_message_class+'"></div>'),options.override_input_margins&&(message_margin_top=parseInt(e.next().css("margin-top")),message_margin_bottom=parseInt(e.next().css("margin-bottom")),input_margin=parseInt(e.css("margin-bottom")),e.next().css("margin-top",5-input_margin+"px").css("margin-bottom",input_margin-5+"px")),e.next().hide().html(r).fadeIn(400)):e.next(".validation_error").stop().fadeIn()}function vnDisableParentForm(e){return options=$this_form.data("vn_options"),$button=e.find(options.submit_button_selector),e.find(':input[aria-invalid="true"]').length?(setTimeout(function(){vnAttachMessage($button,options.form_error_message)},100),void $button.prop("disabled",!0)):e.find(":input[required]").filter(function(){return!jQuery(this).getValue()}).length?(vnAttachMessage($button,options.required_fields_initial_error_message),void $button.prop("disabled",!0)):(vnAttachMessage($button,""),void $button.prop("disabled",!1))}var validation_debounce_timeout,validin_default_options={validation_tests:{alpha:{regex:/[a-zA-Z]*/,error_message:"This can only contain only letters"},alpha_num:{regex:/[A-Z0-9]*/i,error_message:"This can only contain letters and numbers"},alpha_space:{regex:/[A-Z ]*/i,error_message:"This can only contain letters"},alpha_dash:{regex:/[A-Z\.\-_]*/i,error_message:"This can only contain letters, underscores and hyphens"},alpha_num_dash:{regex:/[A-Z0-9\.\-_]*/i,error_message:"This can only contain letters, numbers, underscores and hyphens"},number:{regex:/[\d]*/,error_message:"This needs to be a valid whole number"},decimal:{regex:/(\d*\.?\d*)/,error_message:"This needs to be a valid number"},name:{regex:/[A-Z\.\-'\s]*/i,error_message:"This needs to be a valid name"},email:{regex:/[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}/i,error_message:"This needs to be a valid email address"},url:{regex:/(https?|ftp):\/\/[^\s\/$.?#].[^\s]*/i,error_message:"This needs to be a valid URL"},phone:{regex:/(?=.*?\d{3}( |-|.)?\d{4})((?:\+?(?:1)(?:\1|\s*?))?(?:(?:\d{3}\s*?)|(?:\((?:\d{3})\)\s*?))\1?(?:\d{3})\1?(?:\d{4})(?:\s*?(?:#|(?:ext\.?))(?:\d{1,5}))?)\b/i,error_message:"This needs to be a valid phone number"},zip:{regex:/\d{5}(?:-?\d{4})?/i,error_message:"This needs to be a valid zip code"},creditcard:{regex:/(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|6(?:011|5[0-9][0-9])[0-9]{12}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|(?:2131|1800|35\d{3})\d{11})/i,error_message:"This needs to be a valid credit card number"},regex:{regex:null,error_message:"This is not a valid value"},min:{regex:null,error_message:"This number needs to be at least %i"},max:{regex:null,error_message:"This number needs to no more than %i"},min_length:{regex:null,error_message:"This needs to be at least %i characters long"},max_length:{regex:null,error_message:"This needs to be no more than %i characters long"},match:{regex:null,error_message:"These values have to match"}},feedback_delay:1500,invalid_input_class:"invalid",error_message_class:"validation_error",submit_button_selector:"input[type='submit']",form_error_message:"Please fix any errors in the form",required_fields_initial_error_message:"Please fill in all required fields",required_field_error_message:"This field is required",override_input_margins:!0,custom_tests:{},onValidateInput:function(){}};jQuery.fn.validin=function(e){jQuery(this).each(function(){jQuery(this).is("form")?jQuery(this).applyValidation(e):jQuery(this).find("form").applyValidation(e)})},jQuery.fn.applyValidation=function(e){$this_form=jQuery(this),$this_form.data("vn_options")?options=$this_form.data("vn_options"):(options=jQuery.extend(validin_default_options,e),$this_form.data("vn_options",options)),$this_form.addClass("validin"),$form_inputs=jQuery(this).find(":input"),jQuery('[validate*="required"]').attr("required",!0),vnDisableParentForm(jQuery(this)),$form_inputs.off("input blur submit"),$form_inputs.on("input blur",function(e){"true"==jQuery(this).attr("aria-invalid")||"blur"==e.type?vnValidateInput(jQuery(this),!0):vnValidateInput(jQuery(this),!1)}),jQuery(this).on("submit",function(e){$form=jQuery(this),vnIsFormValid($form)||(e.preventDefault(),e.stopPropagation(),$form.find(':input[aria-invalid="true"]').first().focus())}),$form_inputs.keypress(function(e){var r=jQuery(this),a=jQuery(this).closest("form");a.find(":input");if(13==e.keyCode){if(vnIsFormValid(a))return;if(r.is("textarea"))return;e.preventDefault(),e.stopPropagation(),a.find(':input[aria-invalid="true"]').first().focus()}})},jQuery.fn.getValue=function(){return!(!this.is(":checkbox")||!this.is(":checked"))||!(this.is(":checkbox")&&!this.is(":checked"))&&(this.is(":radio")&&jQuery('input[name="'+this.attr("name")+'"]').filter(":checked").val()?jQuery('input[name="'+this.attr("name")+'"]').filter(":checked").val():!(this.is(":radio")&&!jQuery('input[name="'+this.attr("name")+'"]').filter(":checked").val())&&(!!this.val()&&this.val()))};